{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/Script.js","webpack://exports/external \"sketch\""],"names":["BorderPositions","FillTypes","GradientTypes","ShadowTypes","TextAligns","ResizingType","contColorDict","bgLineColorDict","otherColorDict","maskColorDict","borderColorDict","shadowColorDict","bgLineColors","otherColors","maskColors","shadowColors","colorPools","colorPoolNames","kLayerTBColorCustomKey","kLayerTBOrignalNameKey","app","NSApplication","sharedApplication","doc","selection","plugin","command","page","artboards","selectedArtboard","currentLayer","initContext","context","document","currentPage","currentArtboard","count","undefined","onRun","console","log","customColorValue","readColorValue","showMessage","getColor","layer","isKindOfClass","MSLayer","MSLayerGroup","saveOrignalLayerName","valueForKey_onLayer","setColorValueAllLayers","i","artboard","j","layers","finallayer","getChildren","colortext","setValue_forKey_onLayer","name","getOrignalLayerName","setColorValueWithLayers","setEachLayerName","finalLayer","length","child","setColorValueWithOneLayer","openSetColorPanel","setColorValueWithSectionLayers","openSetColorPanelWithLayers","setColorValueWithCurrentLayer","setSelectedLayerColorValue","restoreLayer","restorSelectionLayerName","restorEachLayerName","ungroupAllLayer","x","children","MSSymbolInstance","symbolMaster","ungroup","ungroupWithLayer","text","class","exportText","exportSize","returnText","colorArray","colorToKeyForText","textColor","push","join","layerStyle","style","backgroundColor","getFills","borderColor","getBorders","fillType","color","bzone6","z","param","to","gradient","from","parseInt","Math","atan","abs","y","PI","colorStops","position","fillsData","fill","fillIter","fills","objectEnumerator","nextObject","isEnabled","fillData","colorToKey","gradientToJSON","bordersData","border","borderIter","borders","borderData","thickness","colorToKeyForBorder","colorHex","colorToJSON","key","alpha","obj","r","round","red","g","green","b","blue","a","bzone","d","toString","toFixed","pointToJSON","point","parseFloat","colorStopToJSON","colorStop","stopsData","stop","stopIter","stops","type","gradientType","MSShapeGroup","MSSymbolMaster","MSArtboardGroup","childrens","tempChildren","t","MSSliceLayer","customColorName","buttons","view","NSView","alloc","initWithFrame","NSMakeRect","label","NSText","NSColor","clearColor","textAligment","NSTextAlignmentRight","string","NSString","stringWithFormat","addSubview","frame","pool","button","NSPopUpButton","addItemWithTitle","index","origin","size","height","setCOSJSTargetFunction","sender","buttonAction","restoreButton","NSButton","bezelStyle","NSBezelStyleRounded","setTitle","hasOwnProperty","element","selectItemAtIndex","value","indexOfSelectedItem","tempValue","titleOfSelectedItem","split","alertWindow","COSAlertWindow","new","addButtonWithTitle","setMessageText","setInformativeText","setAccessoryView","runModal","openAlertWithMessage","message","originalName"],"mappings":"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","file":"__Script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/Script.js\");\n","import sketch from 'sketch'\n\nvar BorderPositions = [\"center\", \"inside\", \"outside\"],\n    FillTypes = [\"color\", \"gradient\"],\n    GradientTypes = [\"linear\", \"radial\", \"angular\"],\n    ShadowTypes = [\"outer\", \"inner\"],\n    TextAligns = [\"left\", \"right\", \"center\", \"justify\", \"left\"],\n    ResizingType = [\"stretch\", \"corner\", \"resize\", \"float\"];\n// 字体色库\nvar contColorDict = {\n    \"#ffffff_1.00\": \"cont_color_a\",\n    \"#272829_1.00\": \"cont_color_b\",\n    \"#8e9294_1.00\": \"cont_color_c\",\n    \"#a2a6a8_1.00\": \"cont_color_d\",\n    \"#b8bcbf_1.00\": \"cont_color_e\",\n    \"#3d3f40_1.00\": \"cont_color_f\",\n    \"#cbd1d4_1.00\": \"cont_color_g\",\n    \"#ff392b_1.00\": \"cont_color_h\",\n    \"#515354_1.00\": \"cont_color_j\",\n    \"#00a2ff_1.00\": \"linktip_color_c\",\n    };\n// 背景色库\nvar bgLineColorDict = {\n    \"#edeff0_1.00\": \"bgline_color_b\",\n    \"#f7f9fa_1.00\": \"bgline_color_c\",\n    \"#ffffff_1.00\": \"bgline_color_d\",\n    \"#ffffff_1.00\": \"bgline_color_e\",\n    \"#ffffff_0.92\": \"bgline_color_f\",\n    \"#f7f9fa_1.00\": \"bgline_color_g\",\n    \"#ffffff_1.00\": \"bgline_color_h\",\n    \"#ffffff_1.00\": \"bgline_color_i\",\n    \"#f2f4f5_1.00\": \"bgline_color_j\",\n    \"#ffffff_1.00\": \"bgline_color_k\",\n    };\n// 强调色库\nvar otherColorDict = {\n    \"#ff392b_1.00\": \"cont_color_h\",\n    \"#00a2ff_1.00\": \"linktip_color_a\",\n    \"#2bbcff_1.00\": \"linktip_color_b\",\n    \"#00a2ff_1.00\": \"linktip_color_c\",\n    \"#ffa32b_1.00\": \"linktip_color_d\",\n    \"#2b87ff_1.00\": \"linktip_color_e\",\n    \"#a32bff_1.00\": \"other_color_a\",\n    \"#ff2b87_1.00\": \"other_color_b\",\n    \"#24d45c_1.00\": \"other_color_c\",\n    \"#ffd82b_1.00\": \"other_color_f\",\n    \"#fffbeb_1.00\": \"other_color_g\",\n    };\n// 蒙层色库    \nvar maskColorDict = {\n    \"#000000_0.00\": \"mask_color_b0\",\n    \"#000000_0.16\": \"mask_color_b16\",\n    \"#000000_0.25\": \"mask_color_b25\",\n    \"#000000_0.33\": \"mask_color_b33\",\n    \"#000000_0.42\": \"mask_color_b42\",\n    \"#000000_0.50\": \"mask_color_b50\",\n    \"#000000_0.66\": \"mask_color_b66\",\n    \"#000000_0.83\": \"mask_color_b83\",\n    /*\"#000000_1.00\": \"mask_color_b100\",*/\n    \"#ffffff_0.00\": \"mask_color_c0\",\n    \"#ffffff_0.16\": \"mask_color_c16\",\n    \"#ffffff_0.25\": \"mask_color_c25\",\n    \"#ffffff_0.33\": \"mask_color_c33\",\n    \"#ffffff_0.42\": \"mask_color_c42\",\n    \"#ffffff_0.50\": \"mask_color_c50\",\n    \"#ffffff_0.66\": \"mask_color_c66\",\n    \"#ffffff_0.83\": \"mask_color_c83\",\n    /*\"#ffffff_1.00\": \"mask_color_c100\",*/\n    \n    };\n// 边框色库    \nvar borderColorDict = {\n    \"#edeff0_1.00\": \"border_color_a\",\n    \"#ffffff_1.00\": \"border_color_b\",\n    };\n\n// 阴影色库    \nvar shadowColorDict = {\n    \"#9fc0d4_0.00\": \"shadow_color_a0\",\n    \"#9fc0d4_0.08\": \"shadow_color_a0.08\",\n    \"#9fc0d4_0.16\": \"shadow_color_a0.16\",\n    \"#9fc0d4_0.25\": \"shadow_color_a0.25\",\n    \"#9fc0d4_0.33\": \"shadow_color_a0.33\",\n    \"#9fc0d4_0.42\": \"shadow_color_a0.42\",\n    };\n\n\nvar bgLineColors = [\"bgline_color_b, 细线分割线(全端分割线)\",\"bgline_color_c, 组、面分割(此颜色慎用)\",\"bgline_color_d, 产品底层背景色\",\"bgline_color_e, 内容层及卡片背景\",\n\"bgline_color_f, 分享、发布模态层背景(如模态层上有白色图形时)\",\"bgline_color_g, 内容层及卡片上子视图背景(楼中楼、分享贴底色)\",\"bgline_color_h, 悬浮视图层背景(内容层加阴影的视图)\",\"bgline_color_i, 模态层弹窗类上子视图背景\",\"bgline_color_j, 输入类容器背景\",\"bgline_color_k, 模态层弹窗类背景(筛选、更多)\",]\nvar otherColors = [ \"cont_color_h\", \"linktip_color_a\",\"linktip_color_b\",\"linktip_color_c\",\"linktip_color_d\",\"linktip_color_e\",\"other_color_a\",\n\"other_color_b\",\"other_color_c\",\"other_color_f\",\"other_color_g\"]\nvar maskColors  = [\"mask_color_b0\",\"mask_color_b16\",\"mask_color_b25\",\"mask_color_b33\",\"mask_color_b42\",\"mask_color_b50\",\"mask_color_b66\",\"mask_color_b83\",\"mask_color_c0\",\"mask_color_c16\",\"mask_color_c25\",\"mask_color_c33\",\"mask_color_c42\",\"mask_color_c50\",\"mask_color_c66\",\"mask_color_c83\",]\nvar shadowColors = [ \"shadow_color_a0\",\"shadow_color_a0.08\",\"shadow_color_a0.16\",\"shadow_color_a0.25\",\"shadow_color_a0.33\",\n\"shadow_color_a0.42\",]\nvar colorPools = [ bgLineColors, otherColors,maskColors,shadowColors];\nvar colorPoolNames = [\"背景色库\", \"强调色库\", \"蒙层色库\", \"阴影色库\"];\n\nvar kLayerTBColorCustomKey = \"kLayerTBColorCustomKey\";\nvar kLayerTBOrignalNameKey = \"kLayerTBOrignalNameKey\";\n\nvar app = NSApplication.sharedApplication(),\n    doc,             // MSDocument object,\n    selection,       // an NSArray of the layer(s) that are selected in the current document\n    plugin,\n    command,\n    page,            // the current page in the current document\n    artboards,       // artboards and slices on the current page\n    selectedArtboard,\n    currentLayer;\n\n\n//--------------------------------------//\n//               Context                //\n//--------------------------------------//\n\n/**\n * 初始化插件的运行上下文\n * @param context\n */\nfunction initContext(context) {\n    doc = context.document,\n    selection = context.selection,\n    plugin = context.plugin,\n    command = context.command,\n    page = doc.currentPage(),\n    artboards = page.artboards(),   // 只读\n    selectedArtboard = page.currentArtboard(),\n    currentLayer = (selection.count() > 0) ? selection[0] : undefined;  // 当前画板默认是用户选择的第一个画板\n}\n\n// 读取一个图层的色值\nexport default function onRun(context) {\n    initContext(context);\n    console.log(context);\n    var customColorValue = readColorValue(context, currentLayer);\n    if (customColorValue) {\n        doc.showMessage(customColorValue);\n    } else {\n        doc.showMessage(\"当前选中图层的颜色不在色库中\" + getColor(currentLayer));\n    }\n}\n\n// 读取一个图层的色值\nexport function readColorValue(context, layer) {\n    // 初始化上下文\n    initContext(context);\n    if (layer.isKindOfClass(MSLayer) == false || layer.isKindOfClass(MSLayerGroup)) {\n        return \"不是有效图层\";\n    }\n    saveOrignalLayerName(layer);\n    var customColorValue = command.valueForKey_onLayer(kLayerTBColorCustomKey, layer);\n    if (customColorValue == null) {\n        customColorValue = getColor(layer);\n    }\n    return customColorValue;\n}\n\n// 给所有的图层设置颜色\nvar setColorValueAllLayers = function (context) {\n    // 初始化上下文\n    initContext(context);\n    for (var i = 0; i < artboards.count(); i++) {\n        var artboard = artboards[i];\n        for (var j = 0; j < artboard.layers().count(); j++) {\n            var layer = artboard.layers()[j];\n            var finallayer = getChildren(layer);\n            if (finallayer == null) {\n                continue;\n            }\n            var colortext = getColor(finallayer);\n            if (colortext) {\n                command.setValue_forKey_onLayer(colortext, kLayerTBColorCustomKey, finallayer);\n                saveOrignalLayerName(finallayer);\n                finallayer.name = colortext + \" | \" + getOrignalLayerName(finallayer);\n            } else {\n            }\n            \n        }\n    }\n    doc.showMessage(\"设置成功\");\n}\nexport function setColorValueWithLayers(context) {\n    // 初始化上下文\n    initContext(context);\n    setEachLayerName(currentLayer);\n}\n\nvar setEachLayerName = function (layer) {\n    var finalLayer = getChildren(layer);\n    for (var i = 0; i < finalLayer.length; i++) {\n        var child = finalLayer[i];\n        log(child);\n        var colortext = getColor(child);\n        if (colortext) {\n            saveOrignalLayerName(child);\n            child.name = colortext + \" | \" + getOrignalLayerName(child);\n        }\n    }\n}\n\n// 给当前选中的图层设置颜色\nvar setColorValueWithOneLayer = function (context, layer) {\n    // 初始化上下文\n    initContext(context);\n    openSetColorPanel(context, layer);\n}\n\n// 给当前多选的图层设置颜色\nvar setColorValueWithSectionLayers = function (context, selection) {\n    // 初始化上下文\n    initContext(context);\n    openSetColorPanelWithLayers(context, selection);\n}\n\nexport function setColorValueWithCurrentLayer(context) {\n    initContext(context);\n    if (!currentLayer) {\n        doc.showMessage(\"当前没有选中任何图层！！\");\n        return;\n    }\n    if (selection.count() > 1) {\n        doc.showMessage(\"当前为多选图层状态\");\n        setColorValueWithSectionLayers(context, selection);\n    } else {\n        setColorValueWithOneLayer(context, currentLayer);\n    }\n}\n\n// 指定一个layer的颜色\nvar setSelectedLayerColorValue = function (context) {\n    // 初始化上下文\n    initContext(context);\n}\n\nexport function restoreLayer(context) {\n    // 初始化上下文\n    initContext(context);\n    restorSelectionLayerName(selection);\n}\n\nvar restorEachLayerName = function (layer) {\n    var finalLayer = getChildren(layer);\n    for (var i = 0; i < finalLayer.length; i++) {\n        var child = finalLayer[i];\n        child.name = getOrignalLayerName(child);\n        command.setValue_forKey_onLayer(null,kLayerTBColorCustomKey,child);\n    }\n}\n\nvar restorSelectionLayerName = function (selection) {\n    for (var i = 0; i < selection.count(); i++) {\n        var layer = selection[i];\n        restorEachLayerName(layer);\n    }\n}\n// 解除所有图层的组件\nvar ungroupAllLayer = function (context) {\n    // 初始化上下文\n    initContext(context);\n    for (var i = 0; i < artboards.count(); i++) {\n        var artboard = artboards[i];\n        console.log(artboard);\n        for (var j = 0; j < artboard.layers().count(); j++) {\n            var layer = artboard.layers()[j];\n            for (var x = 0; x < layer.children().count(); x++) {\n                var child = layer.children()[x];\n                console.log(child);\n                if (child.isKindOfClass(MSSymbolInstance)) {\n                    console.log(\"ungrounping...\");\n                    child.symbolMaster().ungroup();\n                }\n            }\n        }\n    }\n    console.log(\"解组完成！\");\n    doc.showMessage(\"解组完成！\");\n}\n\nexport function ungroupWithLayer(context) {\n    initContext(context);\n    if (currentLayer.isKindOfClass(MSSymbolInstance)) {\n        currentLayer.symbolMaster().ungroup();\n    }\n    console.log(\"解组完成！\");\n    doc.showMessage(\"解组完成！\");\n}\n\nvar getColor = function (layer) {\n    var text = '';\n    if (layer.class() == 'MSTextLayer') {\n      text = exportText(layer);\n    } else {\n      text = exportSize(layer);\n    }\n    return text;\n}\n\n// 字体layer处理\nvar exportText = function (layer) {\n    var returnText = [];\n    var colorArray = colorToKeyForText(layer.textColor());\n    if (colorArray.length > 0) {\n        returnText.push(colorArray);\n        return returnText.join('');\n    } else {\n        return \"该字体颜色不在色库中\";\n    }\n}\n\nvar exportSize = function (layer) {\n    var layerStyle = layer.style();\n    var returnText = [];\n    var backgroundColor = getFills(layerStyle);\n    var borderColor = getBorders(layerStyle);\n\n    if (backgroundColor.length > 0) {\n      if (backgroundColor[0].fillType == 'color') {\n        returnText.push(\"填充颜色\");\n        returnText.push(backgroundColor[0].color);\n      } else if (backgroundColor[0].fillType == 'gradient') {\n        returnText.push(\"填充颜色\");\n        var bzone6 = function bzone6(z) {\n          if (z.length != 6) {\n            z = '0' + z;\n          }\n\n          if (z.length != 6) {\n            bzone6(z);\n          } else {\n            return z;\n          }\n        };\n\n        var param = [];\n        var to = backgroundColor[0].gradient.to;\n        var from = backgroundColor[0].gradient.from;\n        param.push(parseInt(90 - 180 * Math.atan(Math.abs(to.y - from.y) / Math.abs(to.x - from.x)) / Math.PI) + 'deg');\n        var colorStops = backgroundColor[0].gradient.colorStops;\n\n        for (var i = 0; i < colorStops.length; i++) {\n            param.push(colorStops[i].color + ' ' + parseInt(colorStops[i].position * 100) + '%');\n        }\n\n        returnText.push('linear-gradient(' + param.join(',') + ')');\n      }\n    } \n    \n    if (borderColor.length > 0) {\n      returnText.push(\"边框颜色\");\n      returnText.push(borderColor[0].color);\n    }\n\n    return returnText.join('');\n}\n\n// 获取填充颜色\nvar getFills = function (style) {\n    var fillsData = [],\n        fill,\n        fillIter = style.fills().objectEnumerator();\n\n    while (fill = fillIter.nextObject()) {\n      if (fill.isEnabled()) {\n        var fillType = FillTypes[fill.fillType()],\n            fillData = {\n          fillType: fillType\n        };\n\n        switch (fillType) {\n          case \"color\":\n            fillData.color = colorToKey(fill.color());\n            break;\n\n          case \"gradient\":\n            fillData.gradient = gradientToJSON(fill.gradient());\n            break;\n\n          default:\n            continue;\n        }\n\n        fillsData.push(fillData);\n      }\n    }\n\n    return fillsData;\n}\n\n// 获取border颜色\nvar getBorders = function (style) {\n    var bordersData = [],\n        border,\n        borderIter = style.borders().objectEnumerator();\n\n    while (border = borderIter.nextObject()) {\n      if (border.isEnabled()) {\n        var fillType = FillTypes[border.fillType()],\n            borderData = {\n          fillType: fillType,\n          position: BorderPositions[border.position()],\n          thickness: border.thickness()\n        };\n\n        switch (fillType) {\n          case \"color\":\n            borderData.color = colorToKeyForBorder(border.color());\n            break;\n\n          case \"gradient\":\n            borderData.gradient = gradientToJSON(border.gradient());\n            break;\n\n          default:\n            continue;\n        }\n\n        bordersData.push(borderData);\n      }\n    }\n\n    return bordersData;\n}\n\nvar colorToKey = function (color) {\n    var colorHex = colorToJSON(color);\n    var colorArray = [];\n\n    var key = colorHex.color + \"_\" + colorHex.alpha;\n\n    if (bgLineColorDict[key]) {\n      // 默认\n      if (key == \"#ffffff_1.00\") {\n        colorArray.push(\"bgline_color_e\");\n      } else {\n        colorArray.push(bgLineColorDict[key]);\n      }\n    }\n\n    if (otherColorDict[key]) {\n      colorArray.push(otherColorDict[key]);\n    }\n\n    if (maskColorDict[key]) {\n      colorArray.push(maskColorDict[key]);\n    }\n\n    if (colorArray.length == 0) {\n        colorArray.push(key);\n    }\n\n    return colorArray;\n}\n\nvar colorToKeyForText = function (color) {\n    var colorHex = colorToJSON(color);\n    var colorArray = [];\n\n    var key = colorHex.color + \"_\" + colorHex.alpha;\n\n    if (contColorDict[key]) {\n      colorArray.push(contColorDict[key]);\n    }\n\n    if (colorArray.length == 0) {\n        colorArray.push(key);\n    }\n    return colorArray;\n}\n\nvar colorToKeyForBorder = function (color) {\n    var colorHex = colorToJSON(color);\n    var colorArray = [];\n\n    var key = colorHex.color + \"_\" + colorHex.alpha;\n\n    if (borderColorDict[key]) {\n        colorArray.push(borderColorDict[key]);\n    }\n\n    if (contColorDict[key]) {\n        colorArray.push(contColorDict[key]);\n    }\n\n    if (otherColorDict[key]) {\n        colorArray.push(otherColorDict[key]);\n    }\n\n    if (colorArray.length == 0) {\n        colorArray.push(key);\n    }\n    return colorArray;\n}\n\nvar colorToJSON = function (color) {\n    var obj = {\n        r: Math.round(color.red() * 255),\n        g: Math.round(color.green() * 255),\n        b: Math.round(color.blue() * 255),\n        a: color.alpha()\n      };\n  \n    function bzone(d) {\n    if (d.length == 1) {\n        d = '0' + d;\n    }\n\n    return d;\n    }\n    return {\n    color : '#' + bzone(obj.r.toString(16)) + bzone(obj.g.toString(16)) + bzone(obj.b.toString(16)),\n    alpha : obj.a.toFixed(2)\n    }\n}\n\nfunction pointToJSON(point) {\n    return {\n      x: parseFloat(point.x),\n      y: parseFloat(point.y)\n    };\n}\n\nfunction colorStopToJSON(colorStop) {\n    return {\n      color: colorToJSON(colorStop.color()),\n      position: colorStop.position()\n    };\n  }\n\nfunction gradientToJSON(gradient) {\n    var stopsData = [],\n        stop,\n        stopIter = gradient.stops().objectEnumerator();\n\n    while (stop = stopIter.nextObject()) {\n        stopsData.push(colorStopToJSON(stop));\n    }\n\n    return {\n        type: GradientTypes[gradient.gradientType()],\n        from: pointToJSON(gradient.from()),\n        to: pointToJSON(gradient.to()),\n        colorStops: stopsData\n    };\n}\n\n\nfunction getChildren (layer) {\n    if (layer.isKindOfClass(MSShapeGroup)) {\n        return layer.children();\n    } else if (layer.isKindOfClass(MSSymbolInstance)) {\n        return layer.symbolMaster().children();\n    } else if (layer.isKindOfClass(MSSymbolMaster)) {\n        return layer.children();\n    } else if (layer.isKindOfClass(MSArtboardGroup)){\n        var layers = layer.layers();\n        var childrens = [];\n        for (var i = 0; i < layers.count(); i++) {\n            var tempChildren = getChildren(layers[i]);\n            for (var j = 0; j < tempChildren.count(); j++) {\n                var t = tempChildren[j];\n                if (t.isKindOfClass(MSSliceLayer)) {\n                    continue;\n                }\n                childrens.push(t);\n            }\n        }\n        return childrens;\n    } else {\n        return layer.children();\n    }\n}\n\nfunction openSetColorPanel(context, layer) {\n    var customColorName = readColorValue(context, layer);\n    var buttons = [];\n\n    // 创建视图\n    var view = NSView.alloc().initWithFrame(NSMakeRect(0, 0, 400, 150));\n\n    // Label\n    var label = NSText.alloc().initWithFrame(NSMakeRect(0, 0, 400, 30));\n    label.backgroundColor = NSColor.clearColor();\n    label.textAligment = NSTextAlignmentRight;\n    label.string = NSString.stringWithFormat(\"当前图层的颜色：%@\",customColorName);\n    view.addSubview(label);\n\n    var frame = NSMakeRect(0, 30, 150, 30);\n    for (var pool in colorPools) {\n        var button = NSPopUpButton.alloc().initWithFrame(frame);\n        button.addItemWithTitle(colorPoolNames[pool]);\n\n        var colorArray = colorPools[pool];\n        for (var index in colorArray) {\n            button.addItemWithTitle(colorArray[index]);\n        }\n        \n        view.addSubview(button);\n        buttons.push(button);\n        frame.origin.y += frame.size.height;\n\n        button.setCOSJSTargetFunction(function(sender) {\n            buttonAction(sender);\n        });\n    }\n\n    var restoreButton = NSButton.alloc().initWithFrame(NSMakeRect(220, 30, 125, 30));\n    restoreButton.bezelStyle = NSBezelStyleRounded;\n    restoreButton.setTitle(\"一键还原图层颜色\");\n    restoreButton.setCOSJSTargetFunction(function(sender) {\n        for (const key in buttons) {\n            if (buttons.hasOwnProperty(key)) {\n                const element = buttons[key];\n                element.selectItemAtIndex(0);\n            }\n        }\n        var value = getColor(currentLayer);\n        label.string = NSString.stringWithFormat(\"当前图层的颜色：%@\",value);\n        command.setValue_forKey_onLayer(value, kLayerTBColorCustomKey, currentLayer);\n        saveOrignalLayerName(currentLayer);\n        currentLayer.name = value + \" | \" + getOrignalLayerName(currentLayer);\n        doc.showMessage(value);\n    });\n    view.addSubview(restoreButton);\n\n    function buttonAction(button) {\n        for (const key in buttons) {\n            if (buttons.hasOwnProperty(key)) {\n                const element = buttons[key];\n                if (element != button) {\n                    element.selectItemAtIndex(0);\n                }\n            }\n        }\n        if (button.indexOfSelectedItem() == 0) {\n            return;\n        }\n        var tempValue = button.titleOfSelectedItem().split(\",\")[0];\n        label.string = NSString.stringWithFormat(\"当前图层的颜色：%@\",tempValue);\n        var value = tempValue;\n        command.setValue_forKey_onLayer(value, kLayerTBColorCustomKey, currentLayer);\n        // 将当前的layer的名称替换成颜色名。\n        saveOrignalLayerName(currentLayer);\n        currentLayer.name = value + \" | \" + getOrignalLayerName(currentLayer);\n        doc.showMessage(value);\n    }\n\n    // 显示对话框\n    var alertWindow = COSAlertWindow.new();\n    alertWindow.addButtonWithTitle(\"OK\");\n    alertWindow.addButtonWithTitle(\"Cancel\");\n    alertWindow.setMessageText(\"色库名称修改:\");\n    alertWindow.setInformativeText(\"请选择要命名的色值名称\");\n    alertWindow.setAccessoryView(view); // 不用 addAccessoryView，否则宽度强制被固定为300\n    alertWindow.runModal();\n}\n\nfunction openSetColorPanelWithLayers(context, selection) {\n    var buttons = [];\n\n    // 创建视图\n    var view = NSView.alloc().initWithFrame(NSMakeRect(0, 0, 400, 150));\n\n    // Label\n    var label = NSText.alloc().initWithFrame(NSMakeRect(0, 0, 400, 30));\n    label.backgroundColor = NSColor.clearColor();\n    label.textAligment = NSTextAlignmentRight;\n    label.string = NSString.stringWithFormat(\"当前为多选图层状态\");\n    view.addSubview(label);\n\n    var frame = NSMakeRect(0, 30, 150, 30);\n    for (var pool in colorPools) {\n        var button = NSPopUpButton.alloc().initWithFrame(frame);\n        button.addItemWithTitle(colorPoolNames[pool]);\n\n        var colorArray = colorPools[pool];\n        for (var index in colorArray) {\n            button.addItemWithTitle(colorArray[index]);\n        }\n        \n        view.addSubview(button);\n        buttons.push(button);\n        frame.origin.y += frame.size.height;\n\n        button.setCOSJSTargetFunction(function(sender) {\n            buttonAction(sender);\n        });\n    }\n\n    var restoreButton = NSButton.alloc().initWithFrame(NSMakeRect(220, 30, 125, 30));\n    restoreButton.bezelStyle = NSBezelStyleRounded;\n    restoreButton.setTitle(\"一键还原图层颜色\");\n    restoreButton.setCOSJSTargetFunction(function(sender) {\n        for (const key in buttons) {\n            if (buttons.hasOwnProperty(key)) {\n                const element = buttons[key];\n                element.selectItemAtIndex(0);\n            }\n        }\n\n        for (const key in selection) {\n            if (selection.hasOwnProperty(key)) {\n                const layer = selection[key];\n                var value = getColor(layer);\n                command.setValue_forKey_onLayer(value, kLayerTBColorCustomKey, layer);\n                saveOrignalLayerName(layer);\n                layer.name = value + \" | \" + getOrignalLayerName(layer);\n            }\n        }\n        label.string = NSString.stringWithFormat(\"多选图层已还原本身颜色代号\");\n    });\n    view.addSubview(restoreButton);\n\n    function buttonAction(button) {\n        for (const key in buttons) {\n            if (buttons.hasOwnProperty(key)) {\n                const element = buttons[key];\n                if (element != button) {\n                    element.selectItemAtIndex(0);\n                }\n            }\n        }\n        if (button.indexOfSelectedItem() == 0) {\n            return;\n        }\n        label.string = NSString.stringWithFormat(\"当前多选图层的颜色：%@\",button.titleOfSelectedItem());\n        var value = button.titleOfSelectedItem();\n        for (var i = 0; i < selection.count(); i++) {\n            const layer = selection[i];\n            command.setValue_forKey_onLayer(value, kLayerTBColorCustomKey, layer);\n            // 将当前的layer的名称替换成颜色名。\n            saveOrignalLayerName(layer);\n            layer.name = value + \" | \" + getOrignalLayerName(layer);\n            doc.showMessage(value);\n        }\n    }\n\n    // 显示对话框\n    var alertWindow = COSAlertWindow.new();\n    alertWindow.addButtonWithTitle(\"OK\");\n    alertWindow.addButtonWithTitle(\"Cancel\");\n    alertWindow.setMessageText(\"色库名称修改:\");\n    alertWindow.setInformativeText(\"请选择要命名的色值名称\");\n    alertWindow.setAccessoryView(view); // 不用 addAccessoryView，否则宽度强制被固定为300\n    alertWindow.runModal();\n}\n\nfunction openAlertWithMessage(message) {\n    var alertWindow = COSAlertWindow.new();\n    alertWindow.addButtonWithTitle(\"OK\");\n    alertWindow.setMessageText(\"当前图层颜色\");\n    alertWindow.setInformativeText(\"请选择要命名的色值名称\");\n    alertWindow.setAccessoryView(view); // 不用 addAccessoryView，否则宽度强制被固定为300\n    alertWindow.runModal();\n}\n\nfunction getOrignalLayerName(layer) {\n    var originalName = command.valueForKey_onLayer(kLayerTBOrignalNameKey, layer);\n    if (originalName) {\n        return originalName;\n    } else {\n        return layer.name();\n    }\n}\n\nfunction saveOrignalLayerName(layer) {\n    command.setValue_forKey_onLayer(getOrignalLayerName(layer), kLayerTBOrignalNameKey, layer);\n}\n","module.exports = require(\"sketch\");"],"sourceRoot":""}